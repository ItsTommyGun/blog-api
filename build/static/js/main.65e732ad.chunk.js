(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{143:function(e,t,n){},144:function(e,t,n){},155:function(e,t){},157:function(e,t){},168:function(e,t){},170:function(e,t){},195:function(e,t){},197:function(e,t){},198:function(e,t){},203:function(e,t){},205:function(e,t){},211:function(e,t){},213:function(e,t){},232:function(e,t){},244:function(e,t){},247:function(e,t){},261:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),r=n(51),a=n.n(r),s=(n(143),n(6)),i=n(29),l=n(7),u=(n(144),n.p+"static/media/loading.e3474b89.svg"),d=n(0);var j=function(e){var t=e.isLoading;return Object(d.jsx)("div",{className:"loading-indicator ".concat(t?"loading":""),children:Object(d.jsx)("img",{className:"loading-indicator__spinner",src:u,alt:"Loading ..."})})},h=n(4),b=(n(36),n(134));function O(){return"ADMIN"===function(){var e=localStorage.getItem("token");return e?Object(b.a)(e).role:""}().toUpperCase()}var g=O,p=n(16),m=n.n(p),f=n(21),x=(n(44),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT||3001),v=n(52);var C=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],o=t[1],r=Object(c.useState)(""),a=Object(s.a)(r,2),i=a[0],l=a[1],u=Object(c.useState)(""),j=Object(s.a)(u,2),b=j[0],O=j[1],g=Object(c.useState)(!1),p=Object(s.a)(g,2),C=(p[0],p[1]);function y(e){return S.apply(this,arguments)}function S(){return(S=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=3;break}return e.next=3,t.json().then((function(e){throw Error(e.error)}));case 3:return e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){localStorage.getItem("token")&&C(!0)}),[]);var k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{password:i,email:n},c=e.target.parentElement.checkValidity();e.target.parentElement.reportValidity(),e.preventDefault(),""!==t.email&&""!==t.password&&c?(O(""),console.log("fetching login, with route and port:","http://localhost:".concat(x,"/api/auth/login")),fetch("http://localhost:".concat(x,"/api/auth/login"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(y).then((function(e){h.c.success("Logged in!",{position:"bottom-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,transition:h.a}),localStorage.setItem("token",e.token),setTimeout((function(){window.location="/"}),1500)})).catch((function(e){console.log("CATCHING ERROR login"),h.c.error(e.message,{position:"bottom-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:h.a})}))):O("Alle Felder m\xfcssen ausgef\xfcllt sein.")};return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsxs)(v.a,{children:[Object(d.jsx)("meta",{charSet:"utf-8"}),Object(d.jsx)("title",{children:"Tommycodes Blog - Login"})]}),Object(d.jsxs)("div",{className:"login",children:[Object(d.jsx)("div",{className:"welcome-headline",children:Object(d.jsx)("h2",{children:"Welcome to Tommycodes"})}),Object(d.jsx)("div",{className:"login-container",children:Object(d.jsxs)("form",{autoComplete:"on",onSubmit:function(e){return k(e)},children:[Object(d.jsx)("label",{children:"E-Mail"}),Object(d.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"example@domain.com",onLoad:function(e){return o(e.target.value)},onChange:function(e){return o(e.target.value)}}),Object(d.jsx)("label",{children:"Password"}),Object(d.jsx)("input",{type:"password",name:"password",required:!0,placeholder:"********",minLength:"6",onLoad:function(e){return l(e.target.value)},onChange:function(e){return l(e.target.value)}}),Object(d.jsx)("span",{className:"error-message error-message--small",children:b}),Object(d.jsx)("button",{onClick:function(e){return k(e)},children:"Login"}),Object(d.jsx)("button",{style:{float:"right"},onClick:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{password:i,email:n};e.target.parentElement.checkValidity(),e.target.parentElement.reportValidity(),e.preventDefault(),""!==t.email&&""!==t.password&&fetch("http://localhost:".concat(x,"/api/auth/register"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(y).then((function(){h.c.success("User was successfully registered!",{position:"bottom-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:h.a})})).catch((function(e){console.log("CATCHING ERROR reg"),h.c.error(e.message,{position:"bottom-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:h.a})}))}(e)},children:"Register"})]})})]})]})},y=n(22),S=n(23);var k,w=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],o=t[1],r=Object(c.useState)(""),a=Object(s.a)(r,2),i=a[0],l=a[1],u=Object(c.useState)(""),j=Object(s.a)(u,2),b=j[0],O=j[1],g=Object(c.useState)(""),p=Object(s.a)(g,2),v=p[0],C=p[1],k=Object(c.useState)(""),w=Object(s.a)(k,2),T=w[0],N=w[1],E=Object(c.useState)(""),P=Object(s.a)(E,2),B=P[0],I=P[1];function L(e){return H.apply(this,arguments)}function H(){return(H=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=3;break}return e.next=3,t.json().then((function(e){if("failed"===e.authStatus)throw Error("authFailed");throw Error(e.message)}));case 3:return e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){A()}),[]);var A=function(){if(""===n){var e=localStorage.getItem("token");fetch("http://localhost:".concat(x,"/api/profile"),{method:"GET",mode:"cors",cache:"no-cache",credentials:"include",headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}).then(L).then((function(e){o(e.name),l(e.surname),O(e.city),localStorage.setItem("city",e.city)})).catch((function(e){if("authFailed"===e.message)return localStorage.removeItem("token"),h.c.error("Session expired or token invalid. Please log in.",{position:"bottom-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,transition:h.a}),void setTimeout((function(){window.location="/"}),2e3);h.c.error(e.message,{position:"bottom-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,transition:h.a})}))}};return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsxs)("div",{className:"main",children:[Object(d.jsx)("h2",{children:"Your profile"}),Object(d.jsxs)("div",{className:"card",children:[Object(d.jsxs)("p",{children:[Object(d.jsx)("label",{children:"Name:"}),Object(d.jsx)("input",{defaultValue:n,onChange:function(e){return C(e.target.value)}})]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("label",{children:"Surname:"}),Object(d.jsx)("input",{defaultValue:i,onChange:function(e){return N(e.target.value)}})]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("label",{children:"City:"}),Object(d.jsx)("input",{defaultValue:b,onChange:function(e){return I(e.target.value)}})]}),Object(d.jsxs)("button",{onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:v,surname:T,city:B};""===e.name&&(e.name=n),""===e.surname&&(e.surname=i),""===e.city&&(e.city=b);var t=localStorage.getItem("token");fetch("http://localhost:".concat(x,"/api/profile"),{method:"PUT",mode:"cors",cache:"no-cache",credentials:"include",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},body:JSON.stringify(e)}).then(L).then((function(e){o(e.profile.name),l(e.profile.surname),h.c.success(e.message,{position:"bottom-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,transition:h.a})})).catch((function(e){console.log("error:",e)}))}()},children:[Object(d.jsx)(y.a,{icon:S.b})," \xc4nderungen speichern"]})]})]}),Object(d.jsx)(h.b,{})]})};function T(e,t){var n=localStorage.getItem("token");return fetch("http://localhost:".concat(x,"/").concat(e),{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"},body:JSON.stringify(t)})}function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;switch(t){case k.success:h.c.success(e,{position:"bottom-center",autoClose:n,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:h.a});break;case k.error:h.c.error(e,{position:"bottom-center",autoClose:n,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:h.a});break;default:h.c.success(e,{position:"bottom-center",autoClose:n,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:h.a})}}!function(e){e[e.error=0]="error",e[e.success=1]="success"}(k||(k={}));var E=function(e){var t=e.handleLoading,n=Object(c.useState)(""),o=Object(s.a)(n,2),r=o[0],a=o[1],i=Object(c.useState)(""),l=Object(s.a)(i,2),u=l[0],j=l[1],b=Object(c.useState)(""),O=Object(s.a)(b,2),g=O[0],p=O[1],v=Object(c.useState)([]),C=Object(s.a)(v,2),w=C[0],E=C[1],P=Object(c.useState)(""),B=Object(s.a)(P,2),I=B[0],L=B[1];function H(e){return A.apply(this,arguments)}function A(){return(A=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=3;break}return e.next=3,t.json().then((function(e){if("failed"===e.authStatus)throw Error("authFailed");throw Error(e.message)}));case 3:return e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){R()}),[I]);var R=function(){t(!0);(function(e){var t=localStorage.getItem("token");return fetch("http://localhost:".concat(x,"/").concat(e),{method:"GET",mode:"cors",cache:"no-cache",credentials:"include",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}})})("api/users").then(H).then((function(e){E(e),t(!1)})).catch((function(e){N(e.message,k.error),t(!1)}))},_=function(e){(function(e,t){var n=localStorage.getItem("token");return fetch("http://localhost:".concat(x,"/").concat(e,"/").concat(t),{method:"DELETE",mode:"cors",cache:"no-cache",credentials:"include",headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"}})})("api/users",e).then(H).then((function(e){N(e.message),L(e)})).catch((function(e){N(e.message,k.error)}))};return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsxs)("div",{className:"main",children:[Object(d.jsx)("h2",{children:"Create new user"}),Object(d.jsx)("form",{children:Object(d.jsxs)("div",{className:"card",children:[Object(d.jsxs)("p",{children:[Object(d.jsx)("label",{children:"User E-Mail:"}),Object(d.jsx)("input",{type:"email",required:!0,placeholder:"example@mail.com",onChange:function(e){return a(e.target.value)}})]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("label",{children:"Password (temporary):"}),Object(d.jsx)("input",{type:"text",required:!0,placeholder:"******",onChange:function(e){return j(e.target.value)}})]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("label",{children:"Role:"}),Object(d.jsxs)("select",{name:"role",onChange:function(e){return p(e.target.value)},defaultValue:"Please choose a role",id:"role",required:!0,children:[Object(d.jsx)("option",{value:"",children:"Please choose a role"}),Object(d.jsx)("option",{id:"admin",children:"Admin"}),Object(d.jsx)("option",{id:"editor",children:"Editor"}),Object(d.jsx)("option",{id:"writer",children:"Writer"})]})]}),Object(d.jsxs)("button",{onClick:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{email:r,password:u,role:g};if(e.target.form.checkValidity(),e.target.form.reportValidity(),e.preventDefault(),""!==t.email&&""!==t.password&&""!==t.role){T("api/auth/register",t).then(H).then((function(e){L(e),N("User was successfully registered")})).catch((function(e){N(e.message,k.error)}))}}(e)},children:[Object(d.jsx)(y.a,{icon:S.b})," \xc4nderungen speichern"]})]})}),Object(d.jsx)("hr",{}),Object(d.jsx)("h2",{children:"All registered users"}),Object(d.jsxs)("table",{children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"Name"}),Object(d.jsx)("td",{children:"Role"}),Object(d.jsx)("td",{children:"Remove"})]})}),Object(d.jsx)("tbody",{children:w.map((function(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:e.email}),Object(d.jsx)("td",{children:e.role}),Object(d.jsx)("td",{children:Object(d.jsxs)("button",{onClick:function(){return _(e._id)},children:[Object(d.jsx)(y.a,{icon:S.c})," Remove"]})})]},e.email)}))})]})]}),Object(d.jsx)(h.b,{})]})},P=(n(150),n(250),n(251),n(252),n(253),n(254),n(255),n(137)),B=n.n(P);var I=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],o=t[1],r=Object(c.useState)(""),a=Object(s.a)(r,2),i=a[0],l=a[1],u=Object(c.useState)(""),j=Object(s.a)(u,2),b=j[0],O=j[1],p=Object(c.useState)(""),C=Object(s.a)(p,2),k=C[0],w=C[1],T=Object(c.useState)(!1),N=Object(s.a)(T,2),E=N[0],P=N[1];function I(e){return L.apply(this,arguments)}function L(){return(L=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=3;break}return e.next=3,t.json().then((function(e){if("failed"===e.authStatus)throw Error("authFailed");throw Error(e.message)}));case 3:return e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){H()}),[k]);var H=function(){fetch("http://localhost:".concat(x,"/api/entry"),{method:"GET",mode:"cors",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"}}).then(I).then((function(e){e.reverse(),o(e)})).catch((function(e){if("authFailed"===e.message)return localStorage.removeItem("token"),h.c.error("Session expired or token invalid. Please log in.",{position:"bottom-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,transition:h.a}),void setTimeout((function(){window.location="/login"}),2e3);h.c.error(e.message,{position:"bottom-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,transition:h.a})}))};return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsxs)(v.a,{children:[Object(d.jsx)("meta",{charSet:"utf-8"}),Object(d.jsx)("title",{children:"Tommycodes Blog - Overview"})]}),Object(d.jsxs)("div",{className:"main",children:[g()&&Object(d.jsxs)("div",{className:"",children:[Object(d.jsxs)("button",{onClick:function(){return P(!E)},className:"blog-entry__button",children:[Object(d.jsx)(y.a,{icon:S.a})," Write entry"]}),E&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("label",{children:"Title of entry"}),Object(d.jsx)("input",{type:"text",onChange:function(e){return l(e.target.value)},required:!0}),Object(d.jsx)("label",{children:"Content of entry"}),Object(d.jsx)(B.a,{config:{docId:"froala-editor",toolbarButtons:["fullscreen","bold","italic","underline","strikeThrough","subscript","superscript","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","-","insertLink","insertImage","insertTable","|","fontAwesome","specialCharacters","insertHR","selectAll","clearFormatting","html","|","undo","redo"],quickInsertTags:["p","div","h1","h2","h3"]},tag:"textarea",onModelChange:function(e){return O(e)}}),Object(d.jsxs)("button",{type:"submit",className:"success",onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:i,content:b};if(""!==e.title&&""!==e.content){var t=localStorage.getItem("token");fetch("http://localhost:".concat(x,"/api/entry"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},body:JSON.stringify(e)}).then(I).then((function(e){w(e),alert("worked!",e),P(!1)})).catch((function(e){h.c.error(e.message,{position:"bottom-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,transition:h.a})}))}}()},children:[Object(d.jsx)(y.a,{icon:S.b})," Publish entry"]})]})]}),""===n&&Object(d.jsx)("h2",{children:"No blog post so far ..."}),n.map((function(e){var t=function(e){var t=new Date(e),n=""+(t.getMonth()+1),c=""+t.getDate(),o=t.getFullYear();return n.length<2&&(n="0"+n),c.length<2&&(c="0"+c),[c,n,o].join(".")}(e.time);return Object(d.jsxs)("div",{className:"blog-entry",children:[Object(d.jsxs)("div",{className:"blog-entry__meta",children:[Object(d.jsx)("h2",{children:e.title}),Object(d.jsxs)("div",{children:["Written on ",t]})]}),Object(d.jsx)("div",{dangerouslySetInnerHTML:{__html:e.content}}),Object(d.jsx)("hr",{})]},e.time)}))]}),Object(d.jsx)(h.b,{})]})},L=n.p+"static/media/tommyCodes.ee0b293c.svg";var H=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],o=t[1],r=Object(c.useState)(""),a=Object(s.a)(r,2),u=a[0],b=a[1];return Object(c.useEffect)((function(){localStorage.getItem("token")&&b(localStorage.getItem("token"))}),[]),Object(d.jsxs)(i.a,{children:[Object(d.jsx)(j,{loadingState:n}),Object(d.jsxs)("header",{children:[Object(d.jsx)("div",{className:"logo-holder",children:Object(d.jsx)(i.b,{activeClassName:"active",to:"/",exact:!0,children:Object(d.jsx)("img",{src:L,alt:"Tommy Codes Blog"})})}),Object(d.jsxs)("div",{className:"main-navigation",children:[Object(d.jsx)("nav",{children:Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsx)(i.b,{activeClassName:"active",to:"/",exact:!0,children:"Blog"})}),!u&&Object(d.jsx)("li",{className:"logout",children:Object(d.jsx)(i.b,{activeClassName:"active",to:"/login",exact:!0,children:"Login"})}),u&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("li",{children:Object(d.jsx)(i.b,{activeClassName:"active",to:"/profile",children:"Profile"})}),O()&&Object(d.jsx)("li",{children:Object(d.jsx)(i.b,{activeClassName:"active",to:"/userManagement",children:"Users"})}),Object(d.jsx)("li",{className:"logout",children:Object(d.jsx)("button",{href:"#",onClick:function(){return localStorage.removeItem("token"),h.c.success("Logged out successfully! Redirecting to home.",{position:"bottom-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:h.a}),void setTimeout((function(){window.location="/"}),2e3)},children:"Logout"})})]})]})}),Object(d.jsx)(h.b,{})]})]}),Object(d.jsxs)(l.c,{children:[Object(d.jsx)(l.a,{path:"/",exact:!0,children:Object(d.jsx)(I,{handleLoading:o})}),Object(d.jsx)(l.a,{path:"/profile",children:Object(d.jsx)(w,{handleLoading:o})}),Object(d.jsx)(l.a,{path:"/userManagement",children:Object(d.jsx)(E,{handleLoading:o})}),Object(d.jsx)(l.a,{handleLoading:o,path:"/login",children:Object(d.jsx)(C,{})})]})]})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,262)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),o(e),r(e),a(e)}))};a.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(H,{})}),document.getElementById("root")),A()},44:function(e,t,n){}},[[261,1,2]]]);
//# sourceMappingURL=main.65e732ad.chunk.js.map