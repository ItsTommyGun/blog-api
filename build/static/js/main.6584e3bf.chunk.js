(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{138:function(e,t,n){},150:function(e,t){},152:function(e,t){},163:function(e,t){},165:function(e,t){},190:function(e,t){},192:function(e,t){},193:function(e,t){},198:function(e,t){},200:function(e,t){},206:function(e,t){},208:function(e,t){},227:function(e,t){},239:function(e,t){},242:function(e,t){},253:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),o=n(49),a=n.n(o),s=(n(138),n(6)),i=n(29),l=n(7),u=n(4),d=(n(36),n(131));function j(){return"ADMIN"===function(){var e=localStorage.getItem("token");return e?Object(d.a)(e).role:""}().toUpperCase()}var h=j,b=n(16),O=n.n(b),p=n(21),g=(n(43),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT||3001),f=n(0);var m=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),a=Object(s.a)(o,2),i=a[0],l=a[1],d=Object(c.useState)(""),j=Object(s.a)(d,2),h=j[0],b=j[1],m=Object(c.useState)(!1),x=Object(s.a)(m,2),v=(x[0],x[1]);function C(e){return y.apply(this,arguments)}function y(){return(y=Object(p.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=3;break}return e.next=3,t.json().then((function(e){throw Error(e.error)}));case 3:return e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){localStorage.getItem("token")&&v(!0)}),[]);var S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{password:i,email:n},c=e.target.parentElement.checkValidity();e.target.parentElement.reportValidity(),e.preventDefault(),""!==t.email&&""!==t.password&&c?(b(""),fetch("http://localhost:".concat(g,"/api/auth/login"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(C).then((function(e){u.c.success("Logged in!",{position:"bottom-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,transition:u.a}),localStorage.setItem("token",e.token),setTimeout((function(){window.location="/"}),1500)})).catch((function(e){console.log("CATCHING ERROR login"),u.c.error(e.message,{position:"bottom-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:u.a})}))):b("Alle Felder m\xfcssen ausgef\xfcllt sein.")};return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("div",{className:"login",children:[Object(f.jsx)("div",{className:"welcome-headline",children:Object(f.jsx)("h2",{children:"Welcome to Tommycodes"})}),Object(f.jsx)("div",{className:"login-container",children:Object(f.jsxs)("form",{autoComplete:"on",onSubmit:function(e){return S(e)},children:[Object(f.jsx)("label",{children:"E-Mail"}),Object(f.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"example@domain.com",onLoad:function(e){return r(e.target.value)},onChange:function(e){return r(e.target.value)}}),Object(f.jsx)("label",{children:"Password"}),Object(f.jsx)("input",{type:"password",name:"password",required:!0,placeholder:"********",minLength:"6",onLoad:function(e){return l(e.target.value)},onChange:function(e){return l(e.target.value)}}),Object(f.jsx)("span",{className:"error-message error-message--small",children:h}),Object(f.jsx)("button",{onClick:function(e){return S(e)},children:"Login"}),Object(f.jsx)("button",{style:{float:"right"},onClick:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{password:i,email:n};e.target.parentElement.checkValidity(),e.target.parentElement.reportValidity(),e.preventDefault(),""!==t.email&&""!==t.password&&fetch("http://localhost:".concat(g,"/api/auth/register"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(C).then((function(){u.c.success("User was successfully registered!",{position:"bottom-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:u.a})})).catch((function(e){console.log("CATCHING ERROR reg"),u.c.error(e.message,{position:"bottom-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:u.a})}))}(e)},children:"Register"})]})})]})})},x=n(22),v=n(23);var C,y=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),a=Object(s.a)(o,2),i=a[0],l=a[1],d=Object(c.useState)(""),j=Object(s.a)(d,2),h=j[0],b=j[1],m=Object(c.useState)(""),C=Object(s.a)(m,2),y=C[0],S=C[1],k=Object(c.useState)(""),w=Object(s.a)(k,2),T=w[0],N=w[1],E=Object(c.useState)(""),P=Object(s.a)(E,2),B=P[0],I=P[1];function H(e){return A.apply(this,arguments)}function A(){return(A=Object(p.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=3;break}return e.next=3,t.json().then((function(e){if("failed"===e.authStatus)throw Error("authFailed");throw Error(e.message)}));case 3:return e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){R()}),[]);var R=function(){if(""===n){var e=localStorage.getItem("token");fetch("http://localhost:".concat(g,"/api/profile"),{method:"GET",mode:"cors",cache:"no-cache",credentials:"include",headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}).then(H).then((function(e){r(e.name),l(e.surname),b(e.city),localStorage.setItem("city",e.city)})).catch((function(e){if("authFailed"===e.message)return localStorage.removeItem("token"),u.c.error("Session expired or token invalid. Please log in.",{position:"bottom-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,transition:u.a}),void setTimeout((function(){window.location="/"}),2e3);u.c.error(e.message,{position:"bottom-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,transition:u.a})}))}};return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsxs)("div",{className:"main",children:[Object(f.jsx)("h2",{children:"Your profile"}),Object(f.jsxs)("div",{className:"card",children:[Object(f.jsxs)("p",{children:[Object(f.jsx)("label",{children:"Name:"}),Object(f.jsx)("input",{defaultValue:n,onChange:function(e){return S(e.target.value)}})]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("label",{children:"Surname:"}),Object(f.jsx)("input",{defaultValue:i,onChange:function(e){return N(e.target.value)}})]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("label",{children:"City:"}),Object(f.jsx)("input",{defaultValue:h,onChange:function(e){return I(e.target.value)}})]}),Object(f.jsxs)("button",{onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:y,surname:T,city:B};""===e.name&&(e.name=n),""===e.surname&&(e.surname=i),""===e.city&&(e.city=h);var t=localStorage.getItem("token");fetch("http://localhost:".concat(g,"/api/profile"),{method:"PUT",mode:"cors",cache:"no-cache",credentials:"include",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},body:JSON.stringify(e)}).then(H).then((function(e){r(e.profile.name),l(e.profile.surname),u.c.success(e.message,{position:"bottom-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,transition:u.a})})).catch((function(e){console.log("error:",e)}))}()},children:[Object(f.jsx)(x.a,{icon:v.b})," \xc4nderungen speichern"]})]})]}),Object(f.jsx)(u.b,{})]})};function S(e,t){var n=localStorage.getItem("token");return fetch("http://localhost:".concat(g,"/").concat(e),{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"},body:JSON.stringify(t)})}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;switch(t){case C.success:u.c.success(e,{position:"bottom-center",autoClose:n,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:u.a});break;case C.error:u.c.error(e,{position:"bottom-center",autoClose:n,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:u.a});break;default:u.c.success(e,{position:"bottom-center",autoClose:n,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:u.a})}}!function(e){e[e.error=0]="error",e[e.success=1]="success"}(C||(C={}));var w=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),a=Object(s.a)(o,2),i=a[0],l=a[1],d=Object(c.useState)(""),j=Object(s.a)(d,2),h=j[0],b=j[1],m=Object(c.useState)([]),y=Object(s.a)(m,2),w=y[0],T=y[1],N=Object(c.useState)(""),E=Object(s.a)(N,2),P=E[0],B=E[1];function I(e){return H.apply(this,arguments)}function H(){return(H=Object(p.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=3;break}return e.next=3,t.json().then((function(e){if("failed"===e.authStatus)throw Error("authFailed");throw Error(e.message)}));case 3:return e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){A()}),[P]);var A=function(){(function(e){var t=localStorage.getItem("token");return fetch("http://localhost:".concat(g,"/").concat(e),{method:"GET",mode:"cors",cache:"no-cache",credentials:"include",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}})})("api/users").then(I).then((function(e){T(e)})).catch((function(e){k(e.message,C.error)}))},R=function(e){(function(e,t){var n=localStorage.getItem("token");return fetch("http://localhost:".concat(g,"/").concat(e,"/").concat(t),{method:"DELETE",mode:"cors",cache:"no-cache",credentials:"include",headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"}})})("api/users",e).then(I).then((function(e){k(e.message),B(e)})).catch((function(e){k(e.message,C.error)}))};return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsxs)("div",{className:"main",children:[Object(f.jsx)("h2",{children:"Create new user"}),Object(f.jsx)("form",{children:Object(f.jsxs)("div",{className:"card",children:[Object(f.jsxs)("p",{children:[Object(f.jsx)("label",{children:"User E-Mail:"}),Object(f.jsx)("input",{type:"email",required:!0,placeholder:"example@mail.com",onChange:function(e){return r(e.target.value)}})]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("label",{children:"Password (temporary):"}),Object(f.jsx)("input",{type:"text",required:!0,placeholder:"******",onChange:function(e){return l(e.target.value)}})]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("label",{children:"Role:"}),Object(f.jsxs)("select",{name:"role",onChange:function(e){return b(e.target.value)},defaultValue:"Please choose a role",id:"role",required:!0,children:[Object(f.jsx)("option",{value:"",children:"Please choose a role"}),Object(f.jsx)("option",{id:"admin",children:"Admin"}),Object(f.jsx)("option",{id:"editor",children:"Editor"}),Object(f.jsx)("option",{id:"writer",children:"Writer"})]})]}),Object(f.jsxs)("button",{onClick:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{email:n,password:i,role:h};if(e.target.form.checkValidity(),e.target.form.reportValidity(),e.preventDefault(),""!==t.email&&""!==t.password&&""!==t.role){S("api/auth/register",t).then(I).then((function(e){B(e),k("User was successfully registered")})).catch((function(e){k(e.message,C.error)}))}}(e)},children:[Object(f.jsx)(x.a,{icon:v.b})," \xc4nderungen speichern"]})]})}),Object(f.jsx)("hr",{}),Object(f.jsx)("h2",{children:"All registered users"}),Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Name"}),Object(f.jsx)("td",{children:"Role"}),Object(f.jsx)("td",{children:"Remove"})]})}),Object(f.jsx)("tbody",{children:w.map((function(e){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:e.email}),Object(f.jsx)("td",{children:e.role}),Object(f.jsx)("td",{children:Object(f.jsxs)("button",{onClick:function(){return R(e._id)},children:[Object(f.jsx)(x.a,{icon:v.c})," Remove"]})})]},e.email)}))})]})]}),Object(f.jsx)(u.b,{})]})},T=(n(144),n(245),n(246),n(132)),N=n.n(T);var E=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),a=Object(s.a)(o,2),i=a[0],l=a[1],d=Object(c.useState)(""),j=Object(s.a)(d,2),b=j[0],m=j[1],C=Object(c.useState)(""),y=Object(s.a)(C,2),S=y[0],k=y[1],w=Object(c.useState)(!1),T=Object(s.a)(w,2),E=T[0],P=T[1];function B(e){return I.apply(this,arguments)}function I(){return(I=Object(p.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=3;break}return e.next=3,t.json().then((function(e){if("failed"===e.authStatus)throw Error("authFailed");throw Error(e.message)}));case 3:return e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){H()}),[S]);var H=function(){fetch("http://localhost:".concat(g,"/api/entry"),{method:"GET",mode:"cors",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"}}).then(B).then((function(e){e.reverse(),r(e)})).catch((function(e){u.c.error(e.message,{position:"bottom-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,transition:u.a})}))};return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsxs)("div",{className:"main",children:[Object(f.jsx)("h2",{children:"Welcome to Tommy's Blog"}),h()&&Object(f.jsxs)("div",{className:"blog-entry-button",children:[Object(f.jsxs)("button",{onClick:function(){return P(!E)},style:{position:"absolute",right:"30px",top:"30px"},children:[Object(f.jsx)(x.a,{icon:v.a})," Write entry"]}),E&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("label",{children:"Title of entry"}),Object(f.jsx)("input",{type:"text",onChange:function(e){return l(e.target.value)},required:!0}),Object(f.jsx)("label",{children:"Content of entry"}),Object(f.jsx)(N.a,{config:{docId:"froala-editor"},tag:"textarea",onModelChange:function(e){return m(e)}}),Object(f.jsxs)("button",{type:"submit",className:"success",onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:i,content:b};if(""!==e.title&&""!==e.content){var t=localStorage.getItem("token");fetch("http://localhost:".concat(g,"/api/entry"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},body:JSON.stringify(e)}).then(B).then((function(e){k(e),alert("worked!",e),P(!1)})).catch((function(e){u.c.error(e.message,{position:"bottom-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,transition:u.a})}))}}()},children:[Object(f.jsx)(x.a,{icon:v.b})," Publish entry"]})]})]}),n.map((function(e){var t=function(e){var t=new Date(e),n=""+(t.getMonth()+1),c=""+t.getDate(),r=t.getFullYear();return n.length<2&&(n="0"+n),c.length<2&&(c="0"+c),[c,n,r].join(".")}(e.time);return Object(f.jsxs)("div",{className:"blog-entry",children:[Object(f.jsx)("h2",{children:e.title}),Object(f.jsxs)("p",{children:["Written on ",t]}),Object(f.jsx)("div",{dangerouslySetInnerHTML:{__html:e.content}}),Object(f.jsx)("hr",{})]},e.time)}))]}),Object(f.jsx)(u.b,{})]})},P=n.p+"static/media/tommyCodes.ee0b293c.svg";var B=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){localStorage.getItem("token")&&r(localStorage.getItem("token"))}),[]),Object(f.jsxs)(i.a,{children:[Object(f.jsxs)("header",{children:[Object(f.jsx)("div",{className:"logo-holder",children:Object(f.jsx)(i.b,{activeClassName:"active",to:"/",exact:!0,children:Object(f.jsx)("img",{src:P,alt:"Tommy Codes Blog"})})}),Object(f.jsxs)("div",{className:"main-navigation",children:[Object(f.jsx)("nav",{children:Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{children:Object(f.jsx)(i.b,{activeClassName:"active",to:"/",exact:!0,children:"Blog"})}),!n&&Object(f.jsx)("li",{className:"logout",children:Object(f.jsx)(i.b,{activeClassName:"active",to:"/login",exact:!0,children:"Login"})}),n&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("li",{children:Object(f.jsx)(i.b,{activeClassName:"active",to:"/profile",children:"Profile"})}),j()&&Object(f.jsx)("li",{children:Object(f.jsx)(i.b,{activeClassName:"active",to:"/userManagement",children:"Users"})}),Object(f.jsx)("li",{className:"logout",children:Object(f.jsx)("button",{href:"#",onClick:function(){return localStorage.removeItem("token"),u.c.success("Logged out successfully! Redirecting to home.",{position:"bottom-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:u.a}),void setTimeout((function(){window.location="/"}),2e3)},children:"Logout"})})]})]})}),Object(f.jsx)(u.b,{})]})]}),Object(f.jsxs)(l.c,{children:[Object(f.jsx)(l.a,{path:"/",exact:!0,children:Object(f.jsx)(E,{})}),Object(f.jsx)(l.a,{path:"/profile",children:Object(f.jsx)(y,{})}),Object(f.jsx)(l.a,{path:"/userManagement",children:Object(f.jsx)(w,{})}),Object(f.jsx)(l.a,{path:"/login",children:Object(f.jsx)(m,{})})]})]})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,254)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),o(e),a(e)}))};a.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(B,{})}),document.getElementById("root")),I()},43:function(e,t,n){}},[[253,1,2]]]);
//# sourceMappingURL=main.6584e3bf.chunk.js.map